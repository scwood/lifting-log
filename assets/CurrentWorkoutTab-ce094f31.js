import{p as dt,u as D,R as p,c as De,r as b,f as H,a as ut,b as J,e as pt,d as Le,B as _,g as ee,h as ht,i as mt,j as he,k as $,l as ft,m as gt,n as Ie,s as Fe,o as vt,q as Oe,t as bt,v as Ae,w as Me,O as He,F as xt,x as yt,y as wt,z as Ct,A as St,C as Tt,D as kt,E as Et,G as jt,H as Rt,I as Pt,J as zt,K as Nt,L as Wt,M as Dt,N as Lt,T as It,P as Ft,Q as Ot,S as Be,U as Te,V as r,W as q,X as ce,Y as At,Z as Mt}from"./index-99334bf2.js";import{I as Ge,a as Ht,b as Bt,c as Gt,C as $t,d as $e,S as _t,N as Q,M as Ut,R as Z,u as _e,D as Ue,e as Vt,f as qt}from"./useCreateWorkoutMutation-625f8365.js";import{T as me,i as de,c as Ve,a as se,b as G,g as Yt,C as ke,d as Ee,e as Kt,f as Xt}from"./workoutUtils-0d29a944.js";import{B as fe}from"./Button-a91a707c.js";function Zt(){return typeof process<"u"&&process.env?"production":"development"}function qe(t,o){return Array.isArray(t)?[...t].reduce((e,n)=>({...e,...qe(n,o)}),{}):typeof t=="function"?t(o):t??{}}var Ye={root:"m-849cf0da"};const Qt={underline:"hover"},ge=dt((t,o)=>{const{underline:e,className:n,unstyled:s,mod:l,...i}=D("Anchor",Qt,t);return p.createElement(me,{component:"a",ref:o,className:De({[Ye.root]:!s},n),...i,mod:[{underline:e},l],__staticSelector:"Anchor",unstyled:s})});ge.classes=Ye;ge.displayName="@mantine/core/Anchor";const Ke=b.createContext(null),Jt=Ke.Provider,eo=()=>b.useContext(Ke),to={},ve=H((t,o)=>{const{value:e,defaultValue:n,onChange:s,size:l,wrapperProps:i,children:u,readOnly:d,...v}=D("CheckboxGroup",to,t),[h,x]=ut({value:e,defaultValue:n,finalValue:[],onChange:s}),S=w=>{const y=w.currentTarget.value;!d&&x(h.includes(y)?h.filter(c=>c!==y):[...h,y])};return p.createElement(Jt,{value:{value:h,onChange:S,size:l}},p.createElement(Ge.Wrapper,{size:l,ref:o,...i,...v,labelElement:"div",__staticSelector:"CheckboxGroup"},p.createElement(Ht,{role:"group"},u)))});ve.classes=Ge.Wrapper.classes;ve.displayName="@mantine/core/CheckboxGroup";var Xe={root:"m-bf2d988c",inner:"m-26062bec",input:"m-26063560",icon:"m-bf295423","input--outline":"m-215c4542"};const oo={labelPosition:"right",icon:$t},no=ee((t,{radius:o,color:e,size:n,iconColor:s,variant:l,autoContrast:i})=>{const u=ht({color:e||t.primaryColor,theme:t}),d=u.isThemeColor&&u.shade===void 0?`var(--mantine-color-${u.color}-outline)`:u.color;return{root:{"--checkbox-size":mt(n,"checkbox-size"),"--checkbox-radius":o===void 0?void 0:he(o),"--checkbox-color":l==="outline"?d:$(e,t),"--checkbox-icon-color":s?$(s,t):ft(i,t)?gt({color:e,theme:t}):void 0}}}),ae=H((t,o)=>{const e=D("Checkbox",oo,t),{classNames:n,className:s,style:l,styles:i,unstyled:u,vars:d,color:v,label:h,id:x,size:S,radius:w,wrapperProps:y,children:c,checked:a,labelPosition:m,description:g,error:f,disabled:T,variant:j,indeterminate:k,icon:R,rootRef:P,iconColor:z,onChange:N,autoContrast:B,mod:A,...Y}=e,L=eo(),V=S||(L==null?void 0:L.size),K=R,M=J({name:"Checkbox",props:e,classes:Xe,className:s,style:l,classNames:n,styles:i,unstyled:u,vars:d,varsResolver:no}),{styleProps:X,rest:O}=pt(Y),I=Le(x),F=L?{checked:L.value.includes(O.value),onChange:ne=>{L.onChange(ne),N==null||N(ne)}}:{};return p.createElement(Bt,{...M("root"),__staticSelector:"Checkbox",__stylesApiProps:e,id:I,size:V,labelPosition:m,label:h,description:g,error:f,disabled:T,classNames:n,styles:i,unstyled:u,"data-checked":F.checked||a||void 0,variant:j,ref:P,mod:A,...X,...y},p.createElement(_,{...M("inner"),mod:{"data-label-position":m}},p.createElement(_,{component:"input",id:I,ref:o,checked:a,disabled:T,mod:{error:!!f,indeterminate:k},...M("input",{focusable:!0,variant:j}),onChange:N,...O,...F,type:"checkbox"}),p.createElement(K,{indeterminate:k,...M("icon")})))});ae.classes={...Xe,...Gt};ae.displayName="@mantine/core/Checkbox";ae.Group=ve;function ue(){return ue=Object.assign?Object.assign.bind():function(t){for(var o=1;o<arguments.length;o++){var e=arguments[o];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t},ue.apply(this,arguments)}function ro(t,o){if(t==null)return{};var e={},n=Object.keys(t),s,l;for(l=0;l<n.length;l++)s=n[l],!(o.indexOf(s)>=0)&&(e[s]=t[s]);return e}var so=b.useLayoutEffect,ao=function(o){var e=b.useRef(o);return so(function(){e.current=o}),e},je=function(o,e){if(typeof o=="function"){o(e);return}o.current=e},io=function(o,e){var n=b.useRef();return b.useCallback(function(s){o.current=s,n.current&&je(n.current,null),n.current=e,e&&je(e,s)},[e])},Re={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},lo=function(o){Object.keys(Re).forEach(function(e){o.style.setProperty(e,Re[e],"important")})},Pe=lo,E=null,ze=function(o,e){var n=o.scrollHeight;return e.sizingStyle.boxSizing==="border-box"?n+e.borderSize:n-e.paddingSize};function co(t,o,e,n){e===void 0&&(e=1),n===void 0&&(n=1/0),E||(E=document.createElement("textarea"),E.setAttribute("tabindex","-1"),E.setAttribute("aria-hidden","true"),Pe(E)),E.parentNode===null&&document.body.appendChild(E);var s=t.paddingSize,l=t.borderSize,i=t.sizingStyle,u=i.boxSizing;Object.keys(i).forEach(function(S){var w=S;E.style[w]=i[w]}),Pe(E),E.value=o;var d=ze(E,t);E.value=o,d=ze(E,t),E.value="x";var v=E.scrollHeight-s,h=v*e;u==="border-box"&&(h=h+s+l),d=Math.max(h,d);var x=v*n;return u==="border-box"&&(x=x+s+l),d=Math.min(x,d),[d,v]}var Ne=function(){},uo=function(o,e){return o.reduce(function(n,s){return n[s]=e[s],n},{})},po=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],ho=!!document.documentElement.currentStyle,mo=function(o){var e=window.getComputedStyle(o);if(e===null)return null;var n=uo(po,e),s=n.boxSizing;if(s==="")return null;ho&&s==="border-box"&&(n.width=parseFloat(n.width)+parseFloat(n.borderRightWidth)+parseFloat(n.borderLeftWidth)+parseFloat(n.paddingRight)+parseFloat(n.paddingLeft)+"px");var l=parseFloat(n.paddingBottom)+parseFloat(n.paddingTop),i=parseFloat(n.borderBottomWidth)+parseFloat(n.borderTopWidth);return{sizingStyle:n,paddingSize:l,borderSize:i}},fo=mo;function Ze(t,o,e){var n=ao(e);b.useLayoutEffect(function(){var s=function(i){return n.current(i)};if(t)return t.addEventListener(o,s),function(){return t.removeEventListener(o,s)}},[])}var go=function(o){Ze(window,"resize",o)},vo=function(o){Ze(document.fonts,"loadingdone",o)},bo=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],xo=function(o,e){var n=o.cacheMeasurements,s=o.maxRows,l=o.minRows,i=o.onChange,u=i===void 0?Ne:i,d=o.onHeightChange,v=d===void 0?Ne:d,h=ro(o,bo),x=h.value!==void 0,S=b.useRef(null),w=io(S,e),y=b.useRef(0),c=b.useRef(),a=function(){var f=S.current,T=n&&c.current?c.current:fo(f);if(T){c.current=T;var j=co(T,f.value||f.placeholder||"x",l,s),k=j[0],R=j[1];y.current!==k&&(y.current=k,f.style.setProperty("height",k+"px","important"),v(k,{rowHeight:R}))}},m=function(f){x||a(),u(f)};return b.useLayoutEffect(a),go(a),vo(a),b.createElement("textarea",ue({},h,{onChange:m,ref:w}))},yo=b.forwardRef(xo);const wo={},be=H((t,o)=>{const{autosize:e,maxRows:n,minRows:s,__staticSelector:l,resize:i,...u}=D("Textarea",wo,t),d=e&&Zt()!=="test",v=d?{maxRows:n,minRows:s}:{};return p.createElement($e,{component:d?yo:"textarea",ref:o,...u,__staticSelector:l||"Textarea",multiline:!0,"data-no-overflow":e&&n===void 0||void 0,__vars:{"--input-resize":i},...v})});be.classes=$e.classes;be.displayName="@mantine/core/Textarea";const Co={duration:100,transition:"fade"};function So(t,o){return{...Co,...o,...t}}function To({offset:t,position:o}){const[e,n]=b.useState(!1),s=b.useRef(),{x:l,y:i,elements:u,refs:d,update:v,placement:h}=Ie({placement:o,middleware:[Fe({crossAxis:!0,padding:5,rootBoundary:"document"})]}),x=h.includes("right")?t:o.includes("left")?t*-1:0,S=h.includes("bottom")?t:o.includes("top")?t*-1:0,w=b.useCallback(({clientX:y,clientY:c})=>{d.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:y,y:c,left:y+x,top:c+S,right:y,bottom:c}}})},[u.reference]);return b.useEffect(()=>{if(d.floating.current){const y=s.current;y.addEventListener("mousemove",w);const c=vt(d.floating.current);return c.forEach(a=>{a.addEventListener("scroll",v)}),()=>{y.removeEventListener("mousemove",w),c.forEach(a=>{a.removeEventListener("scroll",v)})}}},[u.reference,d.floating.current,v,w,e]),{handleMouseMove:w,x:l,y:i,opened:e,setOpened:n,boundaryRef:s,floating:d.setFloating}}var ie={tooltip:"m-1b3c8819",arrow:"m-f898399f"};const ko={refProp:"ref",withinPortal:!0,offset:10,position:"right",zIndex:Oe("popover")},Eo=ee((t,{radius:o,color:e})=>({tooltip:{"--tooltip-radius":o===void 0?void 0:he(o),"--tooltip-bg":e?$(e,t):void 0,"--tooltip-color":e?"var(--mantine-color-white)":void 0}})),xe=H((t,o)=>{const e=D("TooltipFloating",ko,t),{children:n,refProp:s,withinPortal:l,style:i,className:u,classNames:d,styles:v,unstyled:h,radius:x,color:S,label:w,offset:y,position:c,multiline:a,zIndex:m,disabled:g,variant:f,vars:T,portalProps:j,...k}=e,R=bt(),P=J({name:"TooltipFloating",props:e,classes:ie,className:u,style:i,classNames:d,styles:v,unstyled:h,rootSelector:"tooltip",vars:T,varsResolver:Eo}),{handleMouseMove:z,x:N,y:B,opened:A,boundaryRef:Y,floating:L,setOpened:V}=To({offset:y,position:c});if(!Ae(n))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const K=Me(Y,n.ref,o),M=O=>{var I,F;(F=(I=n.props).onMouseEnter)==null||F.call(I,O),z(O),V(!0)},X=O=>{var I,F;(F=(I=n.props).onMouseLeave)==null||F.call(I,O),V(!1)};return p.createElement(p.Fragment,null,p.createElement(He,{...j,withinPortal:l},p.createElement(_,{...k,...P("tooltip",{style:{...qe(i,R),zIndex:m,display:!g&&A?"block":"none",top:(B&&Math.round(B))??"",left:(N&&Math.round(N))??""}}),variant:f,ref:L},w)),b.cloneElement(n,{...n.props,[s]:K,onMouseEnter:M,onMouseLeave:X}))});xe.classes=ie;xe.displayName="@mantine/core/TooltipFloating";const Qe=b.createContext(!1),jo=Qe.Provider,Ro=()=>b.useContext(Qe),Po={openDelay:0,closeDelay:0};function Je(t){const{openDelay:o,closeDelay:e,children:n}=D("TooltipGroup",Po,t);return p.createElement(jo,{value:!0},p.createElement(xt,{delay:{open:o,close:e}},n))}Je.displayName="@mantine/core/TooltipGroup";function zo(t){var k,R,P;const[o,e]=b.useState(!1),s=typeof t.opened=="boolean"?t.opened:o,l=Ro(),i=Le(),{delay:u,currentId:d,setCurrentId:v}=yt(),h=b.useCallback(z=>{e(z),z&&v(i)},[v,i]),{x,y:S,context:w,refs:y,update:c,placement:a,middlewareData:{arrow:{x:m,y:g}={}}}=Ie({placement:t.position,open:s,onOpenChange:h,middleware:[wt(t.offset),Fe({padding:8}),Ct(),St({element:t.arrowRef,padding:t.arrowOffset}),...t.inline?[Tt()]:[]]}),{getReferenceProps:f,getFloatingProps:T}=kt([Et(w,{enabled:(k=t.events)==null?void 0:k.hover,delay:l?u:{open:t.openDelay,close:t.closeDelay},mouseOnly:!((R=t.events)!=null&&R.touch)}),jt(w,{enabled:(P=t.events)==null?void 0:P.focus,keyboardOnly:!0}),Rt(w,{role:"tooltip"}),Pt(w,{enabled:typeof t.opened>"u"}),zt(w,{id:i})]);Nt({opened:s,position:t.position,positionDependencies:t.positionDependencies,floating:{refs:y,update:c}}),Wt(()=>{var z;(z=t.onPositionChange)==null||z.call(t,a)},[a]);const j=s&&d&&d!==i;return{x,y:S,arrowX:m,arrowY:g,reference:y.setReference,floating:y.setFloating,getFloatingProps:T,getReferenceProps:f,isGroupPhase:j,opened:s,placement:a}}const We={position:"top",refProp:"ref",withinPortal:!0,inline:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:Oe("popover"),positionDependencies:[]},No=ee((t,{radius:o,color:e})=>({tooltip:{"--tooltip-radius":o===void 0?void 0:he(o),"--tooltip-bg":e?$(e,t):void 0,"--tooltip-color":e?"var(--mantine-color-white)":void 0}})),te=H((t,o)=>{const e=D("Tooltip",We,t),{children:n,position:s,refProp:l,label:i,openDelay:u,closeDelay:d,onPositionChange:v,opened:h,withinPortal:x,radius:S,color:w,classNames:y,styles:c,unstyled:a,style:m,className:g,withArrow:f,arrowSize:T,arrowOffset:j,arrowRadius:k,arrowPosition:R,offset:P,transitionProps:z,multiline:N,events:B,zIndex:A,disabled:Y,positionDependencies:L,onClick:V,onMouseEnter:K,onMouseLeave:M,inline:X,variant:O,keepMounted:I,vars:F,portalProps:ne,mod:st,...at}=D("Tooltip",We,e),{dir:it}=Dt(),Ce=b.useRef(null),W=zo({position:Lt(it,s),closeDelay:d,openDelay:u,onPositionChange:v,opened:h,events:B,arrowRef:Ce,arrowOffset:j,offset:typeof P=="number"?P+(f?T/2:0):P,positionDependencies:[...L,n],inline:X}),le=J({name:"Tooltip",props:e,classes:ie,className:g,style:m,classNames:y,styles:c,unstyled:a,rootSelector:"tooltip",vars:F,varsResolver:No});if(!Ae(n))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const lt=Me(W.reference,n.ref,o),Se=So(z,{duration:100,transition:"fade"});return p.createElement(p.Fragment,null,p.createElement(He,{...ne,withinPortal:x},p.createElement(It,{...Se,keepMounted:I,mounted:!Y&&!!W.opened,duration:W.isGroupPhase?10:Se.duration},ct=>p.createElement(_,{...at,variant:O,mod:[{multiline:N},st],...W.getFloatingProps({ref:W.floating,className:le("tooltip").className,style:{...le("tooltip").style,...ct,zIndex:A,top:W.y??0,left:W.x??0}})},i,p.createElement(Ft,{ref:Ce,arrowX:W.arrowX,arrowY:W.arrowY,visible:f,position:W.placement,arrowSize:T,arrowOffset:j,arrowRadius:k,arrowPosition:R,...le("arrow")})))),b.cloneElement(n,W.getReferenceProps({onClick:V,onMouseEnter:K,onMouseLeave:M,onMouseMove:e.onMouseMove,onPointerDown:e.onPointerDown,onPointerEnter:e.onPointerEnter,[l]:lt,className:De(g,n.props.className),...n.props})))});te.classes=ie;te.displayName="@mantine/core/Tooltip";te.Floating=xe;te.Group=Je;const[Wo,Do]=Ot("Table component was not found in the tree");var oe={table:"m-b23fa0ef",th:"m-4e7aa4f3",tr:"m-4e7aa4fd",td:"m-4e7aa4ef",tbody:"m-b2404537",thead:"m-b242d975",caption:"m-9e5a3ac7",scrollContainer:"m-a100c15",scrollContainerInner:"m-62259741"};function Lo(t,o){if(!o)return;const e={};return o.columnBorder&&t.withColumnBorders&&(e["data-with-column-border"]=!0),o.rowBorder&&t.withRowBorders&&(e["data-with-row-border"]=!0),o.striped&&t.striped&&(e["data-striped"]=t.striped),o.highlightOnHover&&t.highlightOnHover&&(e["data-hover"]=!0),o.captionSide&&t.captionSide&&(e["data-side"]=t.captionSide),o.stickyHeader&&t.stickyHeader&&(e["data-sticky"]=!0),e}function U(t,o){const e=`Table${t.charAt(0).toUpperCase()}${t.slice(1)}`,n=H((s,l)=>{const i=D(e,{},s),{classNames:u,className:d,style:v,styles:h,...x}=i,S=Do();return p.createElement(_,{component:t,ref:l,...Lo(S,o),...S.getStyles(t,{className:d,classNames:u,style:v,styles:h,props:i}),...x})});return n.displayName=`@mantine/core/${e}`,n.classes=oe,n}const pe=U("th",{columnBorder:!0}),et=U("td",{columnBorder:!0}),re=U("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),tt=U("thead",{stickyHeader:!0}),ot=U("tbody"),nt=U("tfoot"),rt=U("caption",{captionSide:!0});function ye({data:t}){return p.createElement(p.Fragment,null,t.caption&&p.createElement(rt,null,t.caption),t.head&&p.createElement(tt,null,p.createElement(re,null,t.head.map((o,e)=>p.createElement(pe,{key:e},o)))),t.body&&p.createElement(ot,null,t.body.map((o,e)=>p.createElement(re,{key:e},o.map((n,s)=>p.createElement(et,{key:s},n))))),t.foot&&p.createElement(nt,null,p.createElement(re,null,t.foot.map((o,e)=>p.createElement(pe,{key:e},o)))))}ye.displayName="@mantine/core/TableDataRenderer";const Io={type:"scrollarea"},Fo=ee((t,{minWidth:o,type:e})=>({scrollContainer:{"--table-min-width":Be(o),"--table-overflow":e==="native"?"auto":void 0}})),we=H((t,o)=>{const e=D("TableScrollContainer",Io,t),{classNames:n,className:s,style:l,styles:i,unstyled:u,vars:d,children:v,minWidth:h,type:x,...S}=e,w=J({name:"TableScrollContainer",classes:oe,props:e,className:s,style:l,classNames:n,styles:i,unstyled:u,vars:d,varsResolver:Fo,rootSelector:"scrollContainer"});return p.createElement(_,{component:x==="scrollarea"?_t:"div",...x==="scrollarea"?{offsetScrollbars:"x"}:{},ref:o,...w("scrollContainer"),...S},p.createElement("div",{...w("scrollContainerInner")},v))});we.classes=oe;we.displayName="@mantine/core/TableScrollContainer";const Oo={withRowBorders:!0,verticalSpacing:7},Ao=ee((t,{layout:o,captionSide:e,horizontalSpacing:n,verticalSpacing:s,borderColor:l,stripedColor:i,highlightOnHoverColor:u,striped:d,highlightOnHover:v,stickyHeaderOffset:h,stickyHeader:x})=>({table:{"--table-layout":o,"--table-caption-side":e,"--table-horizontal-spacing":Te(n),"--table-vertical-spacing":Te(s),"--table-border-color":l?$(l,t):void 0,"--table-striped-color":d&&i?$(i,t):void 0,"--table-highlight-on-hover-color":v&&u?$(u,t):void 0,"--table-sticky-header-offset":x?Be(h):void 0}})),C=H((t,o)=>{const e=D("Table",Oo,t),{classNames:n,className:s,style:l,styles:i,unstyled:u,vars:d,horizontalSpacing:v,verticalSpacing:h,captionSide:x,stripedColor:S,highlightOnHoverColor:w,striped:y,highlightOnHover:c,withColumnBorders:a,withRowBorders:m,withTableBorder:g,borderColor:f,layout:T,variant:j,data:k,children:R,stickyHeader:P,stickyHeaderOffset:z,mod:N,...B}=e,A=J({name:"Table",props:e,className:s,style:l,classes:oe,classNames:n,styles:i,unstyled:u,rootSelector:"table",vars:d,varsResolver:Ao});return p.createElement(Wo,{value:{getStyles:A,stickyHeader:P,striped:y===!0?"odd":y||void 0,highlightOnHover:c,withColumnBorders:a,withRowBorders:m,captionSide:x||"bottom"}},p.createElement(_,{component:"table",variant:j,ref:o,mod:[{"data-with-table-border":g},N],...A("table"),...B},R||!!k&&p.createElement(ye,{data:k})))});C.classes=oe;C.displayName="@mantine/core/Table";C.Td=et;C.Th=pe;C.Tr=re;C.Thead=tt;C.Tbody=ot;C.Tfoot=nt;C.Caption=rt;C.ScrollContainer=we;C.DataRenderer=ye;function Mo(t){const{exercise:o,workingSet:e,onChange:n}=t;return r.jsxs(C.Tr,{children:[r.jsx(C.Td,{children:o.weight}),de(o)&&r.jsx(C.Td,{children:Ve(o.weight,o.type)}),r.jsx(C.Td,{children:r.jsx(Q,{styles:{input:{width:42}},allowDecimal:!1,max:99,min:0,placeholder:String(o.reps),value:e.reps??"",onChange:s,hideControls:!0})}),r.jsx(C.Td,{children:r.jsx(te,{label:"Enter reps to log",withArrow:!0,disabled:e.reps!==null,events:{hover:!0,touch:!0,focus:!1},children:r.jsx(ae,{size:"md",color:"green",onChange:l,disabled:e.reps===null,checked:e.isLogged})})})]});function s(i){const u=parseInt(String(i));n({isLogged:u>=0?e.isLogged:!1,reps:u>=0?u:null})}function l(i){n({isLogged:i.target.checked,reps:e.reps})}}function Ho(t){const{opened:o,exercise:e,onClose:n,onSave:s}=t,[l,i]=b.useState("doNothing"),[u,d]=b.useState((e==null?void 0:e.weight)??""),[v,h]=b.useState((e==null?void 0:e.sets)??""),[x,S]=b.useState((e==null?void 0:e.reps)??""),[w,y]=b.useState(o);w!==o&&(y(o),g());const c={weight:parseInt(String(u)),sets:parseInt(String(v)),reps:parseInt(String(x))};return r.jsxs(Ut,{opened:o,onClose:n,centered:!0,title:"Exercise complete",children:[r.jsx(Z.Group,{label:"What do you want to do next session?",required:!0,value:l??"",onChange:f=>i(f),children:r.jsxs(q,{gap:"xs",direction:"column",children:[r.jsx(Z,{mt:"md",label:"Do nothing",description:"Keep things the same for next session",value:"doNothing"}),r.jsx(Z,{label:"Add a rep",description:"Add a single rep for next session",value:"addRep"}),r.jsxs("div",{children:[r.jsx(Z,{label:"Add weight",description:"Increases weight by the minimum amount for next session",value:"addWeight"}),l==="addWeight"&&r.jsx(Q,{allowDecimal:!1,allowNegative:!1,value:x,onChange:S,label:"Rep goal at new weight",required:!0,mb:"xs",ml:"xl"})]}),r.jsxs("div",{children:[r.jsx(Z,{label:"Custom",description:"Change the weight, reps, and/or sets for next session",value:"custom"}),l==="custom"&&r.jsxs(q,{direction:"column",gap:4,mt:4,children:[r.jsx(Q,{allowDecimal:!1,allowNegative:!1,value:u,onChange:d,label:"Weight",ml:"xl",required:!0}),r.jsx(Q,{allowDecimal:!1,allowNegative:!1,value:v,onChange:h,label:"Sets",ml:"xl",required:!0}),r.jsx(Q,{allowDecimal:!1,allowNegative:!1,value:x,onChange:S,label:"Reps",ml:"xl",required:!0})]})]})]})}),r.jsx(q,{justify:"flex-end",mt:"lg",children:r.jsx(fe,{color:"green",disabled:!m(),onClick:a,children:"Save"})})]});function a(){if(e===null)return;const f={};switch(l){case"addRep":f.reps=e.reps+1;break;case"addWeight":f.weight=e.weight+e.minimumWeightIncrement,f.reps=c.reps;break;case"custom":f.weight=c.weight,f.sets=c.sets,f.reps=c.reps;break}s(f),n()}function m(){return l==="custom"?c.weight>=0&&c.sets>=0&&c.reps>=0:l==="addWeight"?c.reps>=0:!0}function g(){i("doNothing"),d((e==null?void 0:e.weight)??""),h((e==null?void 0:e.sets)??""),S((e==null?void 0:e.reps)??"")}}function Bo(t){const{workout:o,day:e}=t,{mutate:n}=_e(),[s,l]=b.useState(!1),[i,u]=b.useState(null),[d,v]=b.useState(null),[h,x]=b.useState(null),S=e.exercises.filter(a=>!se(a));return r.jsxs(r.Fragment,{children:[r.jsxs(G,{order:3,children:["Day: ",e.name]}),r.jsx(Ue,{mt:4,mb:"md"}),S.map(a=>r.jsxs("div",{children:[r.jsxs(G,{order:4,mb:"xs",children:[a.name,":"]}),r.jsxs(C,{mb:"lg",withTableBorder:!0,children:[r.jsx(C.Thead,{children:r.jsxs(C.Tr,{children:[r.jsx(C.Th,{children:"Weight"}),de(a)&&r.jsx(C.Th,{children:"Plates"}),r.jsx(C.Th,{children:"Reps"}),r.jsx(C.Th,{children:"Log"})]})}),r.jsxs(C.Tbody,{children:[a.warmUpSets.map(m=>{const g=Yt(a,m);return r.jsxs(C.Tr,{children:[r.jsx(C.Td,{children:g}),de(a)&&r.jsx(C.Td,{children:Ve(g,a.type)}),r.jsx(C.Td,{children:m.reps}),r.jsx(C.Td,{})]},m.id)}),Array.from({length:a.sets}).map((m,g)=>{const f=a.workingSets[g]??{isLogged:!1,reps:null};return r.jsx(Mo,{exercise:a,workingSet:f,onChange:T=>{w(a,g,T)}},g)})]})]})]},a.id)),r.jsx(Ho,{exercise:i,opened:s,onSave:y,onClose:()=>l(!1)})]});async function w(a,m,g){const f={...a,workingSets:{...a.workingSets,[m]:g}};se(f)?(u(a),v(g),x(m),l(!0)):await c(f)}function y(a){if(i===null||d===null||h===null)return;const m={...i,workingSets:{...i.workingSets,[h]:d},nextSession:a};c(m)}async function c(a){await n({workoutId:o.id,updates:{days:o.days.map(m=>m.id===e.id?{...e,exercises:e.exercises.map(g=>g.id===a.id?a:g)}:m)}})}}function Go(t){const{onUndo:o,exercise:e}=t;return r.jsx(ke,{withBorder:!0,shadow:"sm",children:r.jsxs(ke.Section,{withBorder:!0,inheritPadding:!0,py:"xs",children:[r.jsx(G,{order:4,mb:2,children:e.name}),r.jsxs(me,{size:"sm",c:"dimmed",children:["This session: ",Ee(e)," (",Object.values(e.workingSets).map(n=>n.reps).join(","),")",r.jsx("br",{}),"Next session:"," ",Ee({...e,...e.nextSession})]}),r.jsx(fe,{fullWidth:!0,size:"xs",mt:"sm",mb:6,onClick:()=>o(e),children:"Undo"})]})})}function qo(){const{isLoading:t,isError:o,data:e}=Vt(),{mutate:n}=qt(),{mutate:s}=_e(),[l,i]=b.useState((e==null?void 0:e.notes)??""),[u,d]=b.useState(e);if(e!==u&&(d(e),i((e==null?void 0:e.notes)??"")),t)return r.jsx(ce,{children:r.jsx(At,{})});if(o)return r.jsx(ce,{children:"Failed to load workout"});if(!e||e.days.length===0)return r.jsxs(ce,{children:["To get started, ",r.jsx(ge,{to:"/plan",component:Mt,children:"create a workout plan"}),"."]});if(Kt(e))return r.jsxs(r.Fragment,{children:[r.jsx(G,{order:3,mb:"md",children:"Workout complete"}),r.jsx("p",{children:'Click the button below to create the next workout or click "undo" on an exercise to correct any mistakes.'}),r.jsx(fe,{color:"green",mt:4,mb:"md",onClick:y,children:"Create next workout"}),h(),x()]});const v=e.days.filter(c=>c.exercises.some(a=>!se(a)));return r.jsxs(r.Fragment,{children:[r.jsx(q,{align:"center",justify:"space-between",children:r.jsx(G,{order:3,children:"Current workout"})}),r.jsxs(me,{fz:"sm",c:"dimmed",mb:"sm",children:["Created on"," ",new Date(e.createdTimestamp).toLocaleString(void 0,{dateStyle:"long",timeStyle:"short"}),"."]}),v.map(c=>r.jsx(Bo,{day:c,workout:e},c.id)),h(),x()]});function h(){return r.jsx(be,{label:"Notes",placeholder:"Feelings, etc.",mb:"lg",value:l,onChange:c=>i(c.target.value),onBlur:S})}function x(){if(!e)return null;const c=e.days.filter(Xt);return c.length===0?null:r.jsxs(r.Fragment,{children:[r.jsx(G,{order:3,mb:"md",children:"Completed exercises"}),r.jsx(q,{direction:"column",gap:"md",children:c.map(a=>{const m=a.exercises.filter(se);return r.jsxs("div",{children:[r.jsxs("div",{children:[r.jsxs(G,{order:3,children:["Day: ",a.name]}),r.jsx(Ue,{mt:4,mb:"md"})]}),r.jsx(q,{direction:"column",gap:"md",children:m.map(g=>r.jsx(Go,{exercise:g,onUndo:f=>w(a,f)},g.id))})]},a.id)})})]})}function S(){if(!e)return;const c=l.trim(),a=l.trim().length>0?c:null;s({workoutId:e.id,updates:{notes:a}})}function w(c,a){e&&s({workoutId:e.id,updates:{completedTimestamp:null,days:e.days.map(m=>m.id===c.id?{...m,exercises:m.exercises.map(g=>{if(g.id!==a.id)return g;const f={...g.workingSets},T=f[g.sets-1];return T&&(T.isLogged=!1),{...g,workingSets:f}})}:m)}})}function y(){if(!e)return;s({workoutId:e.id,updates:{completedTimestamp:Date.now()}});const c=e.days.map(a=>({...a,exercises:a.exercises.map(m=>({...m,...m.nextSession,workingSets:{},nextSession:{}}))}));n({days:c})}}export{qo as default};
